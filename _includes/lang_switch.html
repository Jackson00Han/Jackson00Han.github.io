{%- comment -%}
  语言切换组件（简化版）：
  只显示“另一种语言”的链接：
  - 在英文页只显示「中文」
  - 在中文页只显示「English」
{%- endcomment -%}

{%- if page.ref -%}

  {%- assign translations = site.pages | where: "ref", page.ref -%}

  {%- for collection in site.collections -%}
    {%- assign coll_docs = collection.docs | where: "ref", page.ref -%}
    {%- assign translations = translations | concat: coll_docs -%}
  {%- endfor -%}

  {%- comment -%} 找到一个不是当前 lang 的文档 {%- endcomment -%}
  {%- assign other = nil -%}
  {%- for t in translations -%}
    {%- if t.lang != page.lang -%}
      {%- assign other = t -%}
      {%- break -%}
    {%- endif -%}
  {%- endfor -%}

  {%- if other -%}
  <div class="lang-switch">
    <a href="{{ other.url | relative_url }}" class="lang-switch__link">
      {%- if other.lang == "en" -%}English
      {%- elsif other.lang == "zh" -%}中文
      {%- else -%}{{ other.lang | upcase }}{%- endif -%}
    </a>
  </div>
  {%- endif -%}

{%- endif -%}
